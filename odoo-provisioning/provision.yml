# provision.yml
# Objetivo: describir en un solo fichero toda la configuración inicial de una DB Odoo.

odoo:
  base_url: "https://aulavie.xtd.es/"
  db: "aulavie"
  admin_login: "xtendoo"
  admin_password: "Xtend00!" # ideal: variable de entorno
  # Si usas Odoo SaaS/managed donde no hay acceso al servidor, este enfoque sigue valiendo (por XML-RPC/JSON-RPC).
  # Si usas Doodba/self-hosted, puedes complementar con odoo-bin shell.

instance:
  timezone: "Europe/Madrid"
  country_code: "ES"
  currency: "EUR"
  main_lang: "es_ES"
  extra_langs:
    - "en_US"

company:
  name: "Aulavie"
  vat: ""
  email: "facturacion@xtendoo.es"
  phone: "+34 655 94 50 25"
  website: "https://aulavie.xtd.es/"
  street: "Calle Fortaleza, 6"
  zip: "41010"
  city: "Sevilla"
  state: "Sevilla"
  country_code: "ES"

users:
  # Crear usuarios iniciales (opcional)
  - name: "Administrator"
    login: "admin"
    email: "admin@example.com"
    lang: "es_ES"
    groups: [] # Admin ya tiene sus grupos
  - name: "Xtendoo"
    login: "xtendoo"
    email: "manuelcalero@xtendoo.es"
    password: "Xtend00!"
    lang: "es_ES" # Forzar idioma español
    groups:
      - "base.group_system" # Administración / Ajustes (Superusuario)
      - "base.group_user" # Tipo de usuario interno
      - "base.group_erp_manager" # Acceso a todas las aplicaciones
      - "base.group_partner_manager" # Contactos / Administrador
      - "account.group_account_manager" # Facturación / Administrador
      - "sales_team.group_sale_manager" # Ventas / Administrador
      - "purchase.group_purchase_manager" # Compras / Administrador
      - "website.group_website_designer" # Sitio web / Editor y diseñador
      - "base.group_no_one" # Características técnicas (Modo desarrollador)

mail:
  outgoing_smtp:
    name: "SMTP Principal"
    smtp_host: "ssl0.ovh.net"
    smtp_port: 465
    smtp_encryption: "ssl" # none | starttls | ssl
    smtp_user: "aulavie@xtd.es"
    smtp_password: "Xtend00!"
    sequence: 10
  incoming_imap:
    name: "IMAP Principal"
    server_type: "imap" # imap | pop
    server_host: "ssl0.ovh.net"
    server_port: 993
    is_ssl: true
    user: "aulavie@xtd.es"
    password: "Xtend00!"
  aliases:
    catchall_domain: "xtd.es"
    catchall: "catchall"
    bounce: "bounce"
  test_email_to: "manuelcalero@xtendoo.es"

modules:
  # Módulos a instalar automáticamente (ids técnicos)
  # Puedes mezclar core y custom si están en addons_path.
  install:
    - "base"
    - "contacts"
    - "mail"
    - "account"
    - "website"
    - "crm"
    - "l10n_es"
    - "sale_management"
    - "purchase"
    - "web_responsive"
    - "l10n_es_partner"
    - "stock"
    # - "l10n_es_aeat"
    # - "l10n_es_sii"

settings:
  # Parámetros típicos de ir.config_parameter (clave/valor)
  ir_config_parameter:
    - key: "web.base.url"
      value: "https://aulavie.xtd.es/"
    - key: "mail.catchall.domain"
      value: "xtd.es"
    - key: "mail.catchall.alias"
      value: "catchall"
    - key: "mail.bounce.alias"
      value: "bounce"
    - key: "report.url"
      value: "localhost://8069"
  # Opcional: activar features según tu política
  flags:
    multi_company: true
    developer_mode: true

validation:
  # Qué checks quieres que el agente valide en navegador
  browser_checks:
    - "company_name"
    - "languages"
    - "modules_installed"
    - "smtp_configured"
    - "smtp_test_sent"
  screenshots:
    enabled: true
    output_dir: "./artifacts/${odoo.db}"
